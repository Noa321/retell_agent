<!DOCTYPE html>
<html>
<head>
    <title>Voice Chat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="font-family: Arial; text-align: center; padding: 20px; background: #f0f0f0;">
    <h2>ğŸ¤ Talk to AI Assistant</h2>
    <p>Your voice agent is ready!</p>
    
    <div style="margin: 20px 0;">
        <button onclick="testBackend()" style="
            background: #27ae60; 
            color: white; 
            border: none; 
            padding: 15px 30px; 
            border-radius: 25px; 
            font-size: 16px; 
            cursor: pointer;
        ">Test Connection</button>
    </div>
    
    <div id="result" style="margin-top: 20px;"></div>
    
    <script>
    async function testBackend() {
        const resultDiv = document.getElementById('result');
        resultDiv.innerHTML = 'ğŸ”„ Testing your voice backend...';
        
        try {
            const response = await fetch('/api/create-web-call', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    user_id: 'test_' + Date.now(),
                    metadata: { source: 'popup_test' }
                })
            });
            
            const data = await response.json();
            
            resultDiv.innerHTML = `
                <div style="background: #d4edda; padding: 15px; border-radius: 10px; margin: 10px 0;">
                    âœ… <strong>Backend Working!</strong><br>
                    Token: ${data.access_token.substring(0, 30)}...<br><br>
                    
                    <strong>Next Steps:</strong><br>
                    1. Get a phone number from Retell.AI<br>
                    2. Assign it to agent: agent_13c02bf3a71ab766dcbd48b323<br>
                    3. Share the number with users<br><br>
                    
                    <em>Your API is production-ready! ğŸš€</em>
                </div>
            `;
            
        } catch (error) {
            resultDiv.innerHTML = `
                <div style="background: #f8d7da; padding: 15px; border-radius: 10px;">
                    âŒ <strong>Error:</strong> ${error.message}
                </div>
            `;
        }
    }
    </script>
</body>
</html>
